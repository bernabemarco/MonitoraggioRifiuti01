CREATE VIEW FRCVistaDBDistinteMancanti AS 
	SELECT FRCVistaArticoliVB.*, LEFT(ISNULL((SELECT DESCRIZIONE FROM ANAGRAFICAARTICOLI WHERE CODICE = FRCVistaArticoliVB.CODART), ''), 500) AS DescrizioneArticolo, 
	       ISNULL((SELECT PROVENIENZA FROM ANAGRAFICAARTICOLIPROD WHERE CODICEART = FRCVistaArticoliVB.CODART AND ESERCIZIO = YEAR(GETDATE())), 0) AS PROVENIENZA
	FROM FRCVistaArticoliVB

GO
GRANT SELECT
    ON OBJECT::[dbo].[FRCVistaDBDistinteMancanti] TO [Metodo98]
    AS [dbo];




CREATE VIEW dbo.VISTAAGGIORNAMENTOREGOLESCONTO
AS
SELECT     	LISTINIARTICOLI.CODART, 
		dbo.anagraficaarticoli.descrizione, 
		LISTINIARTICOLI.NRLISTINO,
		LISTINIARTICOLI.UM, 
		LISTINIARTICOLI.TP_SCONTI, 
		LISTINIARTICOLI.PREZZO, 
                      	LISTINIARTICOLI.PREZZOEURO, 
		ANAGRAFICAARTICOLICOMM.ESERCIZIO, 
		ANAGRAFICAARTICOLI.GRUPPO, 
                      	ANAGRAFICAARTICOLI.CATEGORIA,
		ANAGRAFICAARTICOLI.CODCATEGORIASTAT, 
		ANAGRAFICAARTICOLICOMM.GRUPPOPRZPART, 
		tp_extramag.codrepartopos, 
		tp_extramag.codfamigliapos, 
                      	CASE WHEN TP_LISTINIART.Aggiornato IS NULL THEN 'Aggiornato' ELSE 'Sospeso' END AS Aggiornato, 
		TP_LISTINIART.DataVal
FROM         LISTINIARTICOLI 
	LEFT OUTER JOIN TP_LISTINIART 
		ON LISTINIARTICOLI.UM = TP_LISTINIART.UM AND LISTINIARTICOLI.NRLISTINO = TP_LISTINIART.NRLISTINO AND LISTINIARTICOLI.CODART = TP_LISTINIART.CODART 
	LEFT OUTER JOIN
                      TP_ExtraMag ON LISTINIARTICOLI.CODART = TP_ExtraMag.CodArt 
	LEFT OUTER JOIN
                      ANAGRAFICAARTICOLI ON LISTINIARTICOLI.CODART = ANAGRAFICAARTICOLI.CODICE 
	LEFT OUTER JOIN
                      ANAGRAFICAARTICOLICOMM ON LISTINIARTICOLI.CODART = ANAGRAFICAARTICOLICOMM.CODICEART




GO
GRANT DELETE
    ON OBJECT::[dbo].[VISTAAGGIORNAMENTOREGOLESCONTO] TO [Metodo98]
    AS [dbo];


GO
GRANT INSERT
    ON OBJECT::[dbo].[VISTAAGGIORNAMENTOREGOLESCONTO] TO [Metodo98]
    AS [dbo];


GO
GRANT SELECT
    ON OBJECT::[dbo].[VISTAAGGIORNAMENTOREGOLESCONTO] TO [Metodo98]
    AS [dbo];


GO
GRANT UPDATE
    ON OBJECT::[dbo].[VISTAAGGIORNAMENTOREGOLESCONTO] TO [Metodo98]
    AS [dbo];


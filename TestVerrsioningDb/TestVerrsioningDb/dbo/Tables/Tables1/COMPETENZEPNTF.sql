CREATE TABLE [dbo].[COMPETENZEPNTF] (
    [NRREG]          DECIMAL (10)    NOT NULL,
    [NRRIGA]         SMALLINT        NOT NULL,
    [CODGENERICO]    VARCHAR (7)     NULL,
    [ANNO]           SMALLINT        NOT NULL,
    [MESE]           SMALLINT        NOT NULL,
    [IMPORTO]        DECIMAL (19, 4) DEFAULT (0) NOT NULL,
    [IMPORTOEURO]    DECIMAL (19, 4) DEFAULT (0) NOT NULL,
    [SEGNO]          SMALLINT        DEFAULT (0) NULL,
    [CODCOMMESSA]    VARCHAR (30)    NULL,
    [ESERCIZIO]      DECIMAL (5)     NOT NULL,
    [POSIZIONE]      SMALLINT        NOT NULL,
    [UTENTEMODIFICA] VARCHAR (25)    NOT NULL,
    [DATAMODIFICA]   DATETIME        NOT NULL,
    [ANNOMESE]       VARCHAR (6)     NOT NULL,
    [NOTE]           VARCHAR (255)   NULL,
    [DATAINIZIOCOMP] DATETIME        NULL,
    [DATAFINECOMP]   DATETIME        NULL,
    [IMPORTOVALUTA]  DECIMAL (19, 4) NULL,
    CONSTRAINT [PK_COMPETENZEPNTF] PRIMARY KEY CLUSTERED ([NRREG] ASC, [NRRIGA] ASC) WITH (FILLFACTOR = 90),
    CONSTRAINT [CKC_SEGNO_COMPETENTF] CHECK ([SEGNO] = 0 or [SEGNO] = 1),
    CONSTRAINT [FK_COMPETENZEPNTF_NRREG] FOREIGN KEY ([NRREG]) REFERENCES [dbo].[TESTECONTABILITATF] ([PROGRESSIVO]) ON DELETE CASCADE ON UPDATE CASCADE
);


GO
CREATE NONCLUSTERED INDEX [COMPPNTF]
    ON [dbo].[COMPETENZEPNTF]([NRREG] ASC, [POSIZIONE] ASC) WITH (FILLFACTOR = 90);


GO
CREATE NONCLUSTERED INDEX [CODGENERICO]
    ON [dbo].[COMPETENZEPNTF]([CODGENERICO] ASC) WITH (FILLFACTOR = 90);


GO
CREATE NONCLUSTERED INDEX [ESERCIZIOTF]
    ON [dbo].[COMPETENZEPNTF]([ESERCIZIO] ASC) WITH (FILLFACTOR = 90);


GO
CREATE NONCLUSTERED INDEX [COMMESSA]
    ON [dbo].[COMPETENZEPNTF]([CODCOMMESSA] ASC) WITH (FILLFACTOR = 90);


GO
CREATE NONCLUSTERED INDEX [ANNOMESE]
    ON [dbo].[COMPETENZEPNTF]([ANNO] ASC, [MESE] ASC) WITH (FILLFACTOR = 90);


GO
GRANT DELETE
    ON OBJECT::[dbo].[COMPETENZEPNTF] TO [Metodo98]
    AS [dbo];


GO
GRANT INSERT
    ON OBJECT::[dbo].[COMPETENZEPNTF] TO [Metodo98]
    AS [dbo];


GO
GRANT REFERENCES
    ON OBJECT::[dbo].[COMPETENZEPNTF] TO [Metodo98]
    AS [dbo];


GO
GRANT SELECT
    ON OBJECT::[dbo].[COMPETENZEPNTF] TO [Metodo98]
    AS [dbo];


GO
GRANT UPDATE
    ON OBJECT::[dbo].[COMPETENZEPNTF] TO [Metodo98]
    AS [dbo];


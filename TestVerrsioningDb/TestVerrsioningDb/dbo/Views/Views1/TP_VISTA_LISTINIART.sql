

CREATE VIEW TP_VISTA_LISTINIART
AS
SELECT     TP_LISTINIART.CODART , ANAGRAFICAARTICOLI.DESCRIZIONE AS DSCART, TP_LISTINIART.NRLISTINO , TABLISTINI.DESCRIZIONE AS DSCLST, TP_LISTINIART.UM, 
                   TP_LISTINIART.DataVal , TP_LISTINIART.PREZZO , TP_LISTINIART.PREZZOEURO , 
                   TP_LISTINIART.TP_CodConto , ANAGRAFICACF.DSCCONTO1,TP_LISTINIART.TP_ConsPP, TP_LISTINIART.TP_PrezzoPart , 
                   TP_LISTINIART.TP_PrezzoPartEuro, TP_LISTINIART.TP_Scorporo , TP_LISTINIART.TP_Sconti , 
                   TP_LISTINIART.TP_QTASCONTO , TP_LISTINIART.TP_QTACOEFF, CASE TP_LISTINIART.TP_QTAMO
										WHEN 'M' THEN 'MERCE'
										WHEN 'O' THEN 'OMAGGIO'
										ELSE ''
									   END AS TP_QTAMO, 
                   TP_LISTINIART.TP_Abbuono , TP_LISTINIART.TP_DataCambio, TP_LISTINIART.TP_ValoreCambio , 
                   TABLISTINI.TP_Tipo,CASE TP_LISTINIART.Aggiornato
					WHEN 0 THEN 'NO'
					WHEN 1 THEN 'SI'
					ELSE 'NO'
				END AS AGGIORNATO
FROM         TP_LISTINIART 
INNER JOIN TABLISTINI ON TABLISTINI.NRLISTINO = TP_LISTINIART.NRLISTINO
INNER JOIN ANAGRAFICAARTICOLI ON ANAGRAFICAARTICOLI.CODICE = TP_LISTINIART.CODART
LEFT JOIN ANAGRAFICACF ON ANAGRAFICACF.CODCONTO=TP_LISTINIART.TP_CODCONTO



GO
GRANT DELETE
    ON OBJECT::[dbo].[TP_VISTA_LISTINIART] TO [Metodo98]
    AS [dbo];


GO
GRANT INSERT
    ON OBJECT::[dbo].[TP_VISTA_LISTINIART] TO [Metodo98]
    AS [dbo];


GO
GRANT SELECT
    ON OBJECT::[dbo].[TP_VISTA_LISTINIART] TO [Metodo98]
    AS [dbo];


GO
GRANT UPDATE
    ON OBJECT::[dbo].[TP_VISTA_LISTINIART] TO [Metodo98]
    AS [dbo];

